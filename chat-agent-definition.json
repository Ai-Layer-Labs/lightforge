{
  "schema_name": "agent.definition.v1",
  "title": "Extension Chat Agent",
  "tags": ["agent:definition", "workspace:agents", "extension:chat"],
  "context": {
    "agent_name": "extension-chat",
    "agent_entity_id": "00000000-0000-0000-0000-0000000000dd",
    "description": "Responds to chat messages from the browser extension",
    
    "triggers": [{
      "selector": {
        "all_tags": ["extension:chat", "user:message"],
        "context_match": [
          { 
            "path": "$.content", 
            "op": "contains_any", 
            "value": [""] 
          }
        ]
      }
    }],
    
    "llm_config": {
      "model": "google/gemini-2.5-flash",
      "system_prompt": "You are a helpful AI assistant integrated with the RCRT system via a browser extension. You help users with various tasks and can access the RCRT ecosystem of tools and data.\n\nYou have access to:\n- File management tools (file-storage, agent-loader)\n- System information (agent-helper)\n- The full RCRT breadcrumb ecosystem\n\nWhen users ask questions:\n1. Provide helpful, clear responses\n2. If you need to access files or system info, invoke the appropriate tools\n3. Be conversational and friendly\n4. If you're unsure about something, be honest about it\n\nAlways respond with JSON in this format:\n{\n  \"response_text\": \"Your conversational response to the user\",\n  \"tools_to_invoke\": [\n    {\n      \"tool\": \"tool-name\",\n      \"input\": {...},\n      \"reason\": \"why you're calling this tool\"\n    }\n  ],\n  \"confidence\": 0.9\n}",
      
      "response_schema": {
        "type": "object",
        "required": ["response_text"],
        "properties": {
          "response_text": { 
            "type": "string", 
            "description": "Your conversational response to the user's message" 
          },
          "tools_to_invoke": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "tool": { "type": "string" },
                "input": { "type": "object" },
                "reason": { "type": "string" }
              },
              "required": ["tool", "input"]
            }
          },
          "confidence": { "type": "number", "minimum": 0, "maximum": 1 },
          "conversation_id": { "type": "string", "description": "ID to track conversation thread" }
        }
      }
    }
  }
}
