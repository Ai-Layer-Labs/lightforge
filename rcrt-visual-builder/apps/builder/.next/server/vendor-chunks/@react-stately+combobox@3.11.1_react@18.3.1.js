"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@react-stately+combobox@3.11.1_react@18.3.1";
exports.ids = ["vendor-chunks/@react-stately+combobox@3.11.1_react@18.3.1"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@react-stately+combobox@3.11.1_react@18.3.1/node_modules/@react-stately/combobox/dist/useComboBoxState.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@react-stately+combobox@3.11.1_react@18.3.1/node_modules/@react-stately/combobox/dist/useComboBoxState.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useComboBoxState: () => (/* binding */ $a9e7382a7d111cb5$export$b453a3bfd4a5fa9e)\n/* harmony export */ });\n/* harmony import */ var _react_stately_form__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @react-stately/form */ \"(ssr)/../../node_modules/.pnpm/@react-stately+form@3.2.1_react@18.3.1/node_modules/@react-stately/form/dist/useFormValidationState.mjs\");\n/* harmony import */ var _react_stately_collections__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @react-stately/collections */ \"(ssr)/../../node_modules/.pnpm/@react-stately+collections@3.12.7_react@18.3.1/node_modules/@react-stately/collections/dist/getChildNodes.mjs\");\n/* harmony import */ var _react_stately_list__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-stately/list */ \"(ssr)/../../node_modules/.pnpm/@react-stately+list@3.13.0_react@18.3.1/node_modules/@react-stately/list/dist/useSingleSelectListState.mjs\");\n/* harmony import */ var _react_stately_list__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-stately/list */ \"(ssr)/../../node_modules/.pnpm/@react-stately+list@3.13.0_react@18.3.1/node_modules/@react-stately/list/dist/ListCollection.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/../../node_modules/.pnpm/next@14.2.32_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_stately_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-stately/utils */ \"(ssr)/../../node_modules/.pnpm/@react-stately+utils@3.10.8_react@18.3.1/node_modules/@react-stately/utils/dist/useControlledState.mjs\");\n/* harmony import */ var _react_stately_overlays__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-stately/overlays */ \"(ssr)/../../node_modules/.pnpm/@react-stately+overlays@3.6.19_react@18.3.1/node_modules/@react-stately/overlays/dist/useOverlayTriggerState.mjs\");\n\n\n\n\n\n\n\n/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */ \n\n\n\n\n\nfunction $a9e7382a7d111cb5$export$b453a3bfd4a5fa9e(props) {\n    var _collection_getItem;\n    let { defaultFilter: defaultFilter, menuTrigger: menuTrigger = 'input', allowsEmptyCollection: allowsEmptyCollection = false, allowsCustomValue: allowsCustomValue, shouldCloseOnBlur: shouldCloseOnBlur = true } = props;\n    let [showAllItems, setShowAllItems] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    let [isFocused, setFocusedState] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    let [focusStrategy, setFocusStrategy] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    let onSelectionChange = (key)=>{\n        if (props.onSelectionChange) props.onSelectionChange(key);\n        // If key is the same, reset the inputValue and close the menu\n        // (scenario: user clicks on already selected option)\n        if (key === selectedKey) {\n            resetInputValue();\n            closeMenu();\n        }\n    };\n    var _props_items;\n    let { collection: collection, selectionManager: selectionManager, selectedKey: selectedKey, setSelectedKey: setSelectedKey, selectedItem: selectedItem, disabledKeys: disabledKeys } = (0, _react_stately_list__WEBPACK_IMPORTED_MODULE_1__.useSingleSelectListState)({\n        ...props,\n        onSelectionChange: onSelectionChange,\n        items: (_props_items = props.items) !== null && _props_items !== void 0 ? _props_items : props.defaultItems\n    });\n    let [inputValue, setInputValue] = (0, _react_stately_utils__WEBPACK_IMPORTED_MODULE_2__.useControlledState)(props.inputValue, $a9e7382a7d111cb5$var$getDefaultInputValue(props.defaultInputValue, selectedKey, collection) || '', props.onInputChange);\n    let [initialSelectedKey] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(selectedKey);\n    let [initialValue] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(inputValue);\n    // Preserve original collection so we can show all items on demand\n    let originalCollection = collection;\n    let filteredCollection = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>// No default filter if items are controlled.\n        props.items != null || !defaultFilter ? collection : $a9e7382a7d111cb5$var$filterCollection(collection, inputValue, defaultFilter), [\n        collection,\n        inputValue,\n        defaultFilter,\n        props.items\n    ]);\n    let [lastCollection, setLastCollection] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(filteredCollection);\n    // Track what action is attempting to open the menu\n    let menuOpenTrigger = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)('focus');\n    let onOpenChange = (open)=>{\n        if (props.onOpenChange) props.onOpenChange(open, open ? menuOpenTrigger.current : undefined);\n        selectionManager.setFocused(open);\n        if (!open) selectionManager.setFocusedKey(null);\n    };\n    let triggerState = (0, _react_stately_overlays__WEBPACK_IMPORTED_MODULE_3__.useOverlayTriggerState)({\n        ...props,\n        onOpenChange: onOpenChange,\n        isOpen: undefined,\n        defaultOpen: undefined\n    });\n    let open = (focusStrategy = null, trigger)=>{\n        let displayAllItems = trigger === 'manual' || trigger === 'focus' && menuTrigger === 'focus';\n        // Prevent open operations from triggering if there is nothing to display\n        // Also prevent open operations from triggering if items are uncontrolled but defaultItems is empty, even if displayAllItems is true.\n        // This is to prevent comboboxes with empty defaultItems from opening but allow controlled items comboboxes to open even if the inital list is empty (assumption is user will provide swap the empty list with a base list via onOpenChange returning `menuTrigger` manual)\n        if (allowsEmptyCollection || filteredCollection.size > 0 || displayAllItems && originalCollection.size > 0 || props.items) {\n            if (displayAllItems && !triggerState.isOpen && props.items === undefined) // Show all items if menu is manually opened. Only care about this if items are undefined\n            setShowAllItems(true);\n            menuOpenTrigger.current = trigger;\n            setFocusStrategy(focusStrategy);\n            triggerState.open();\n        }\n    };\n    let toggle = (focusStrategy = null, trigger)=>{\n        let displayAllItems = trigger === 'manual' || trigger === 'focus' && menuTrigger === 'focus';\n        // If the menu is closed and there is nothing to display, early return so toggle isn't called to prevent extraneous onOpenChange\n        if (!(allowsEmptyCollection || filteredCollection.size > 0 || displayAllItems && originalCollection.size > 0 || props.items) && !triggerState.isOpen) return;\n        if (displayAllItems && !triggerState.isOpen && props.items === undefined) // Show all items if menu is toggled open. Only care about this if items are undefined\n        setShowAllItems(true);\n        // Only update the menuOpenTrigger if menu is currently closed\n        if (!triggerState.isOpen) menuOpenTrigger.current = trigger;\n        toggleMenu(focusStrategy);\n    };\n    let updateLastCollection = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        setLastCollection(showAllItems ? originalCollection : filteredCollection);\n    }, [\n        showAllItems,\n        originalCollection,\n        filteredCollection\n    ]);\n    // If menu is going to close, save the current collection so we can freeze the displayed collection when the\n    // user clicks outside the popover to close the menu. Prevents the menu contents from updating as the menu closes.\n    let toggleMenu = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((focusStrategy = null)=>{\n        if (triggerState.isOpen) updateLastCollection();\n        setFocusStrategy(focusStrategy);\n        triggerState.toggle();\n    }, [\n        triggerState,\n        updateLastCollection\n    ]);\n    let closeMenu = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (triggerState.isOpen) {\n            updateLastCollection();\n            triggerState.close();\n        }\n    }, [\n        triggerState,\n        updateLastCollection\n    ]);\n    let [lastValue, setLastValue] = (0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(inputValue);\n    let resetInputValue = ()=>{\n        var _collection_getItem;\n        var _collection_getItem_textValue;\n        let itemText = selectedKey != null ? (_collection_getItem_textValue = (_collection_getItem = collection.getItem(selectedKey)) === null || _collection_getItem === void 0 ? void 0 : _collection_getItem.textValue) !== null && _collection_getItem_textValue !== void 0 ? _collection_getItem_textValue : '' : '';\n        setLastValue(itemText);\n        setInputValue(itemText);\n    };\n    var _props_selectedKey, _ref;\n    let lastSelectedKey = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)((_ref = (_props_selectedKey = props.selectedKey) !== null && _props_selectedKey !== void 0 ? _props_selectedKey : props.defaultSelectedKey) !== null && _ref !== void 0 ? _ref : null);\n    var _collection_getItem_textValue;\n    let lastSelectedKeyText = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(selectedKey != null ? (_collection_getItem_textValue = (_collection_getItem = collection.getItem(selectedKey)) === null || _collection_getItem === void 0 ? void 0 : _collection_getItem.textValue) !== null && _collection_getItem_textValue !== void 0 ? _collection_getItem_textValue : '' : '');\n    // intentional omit dependency array, want this to happen on every render\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    (0, react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        var _collection_getItem;\n        // Open and close menu automatically when the input value changes if the input is focused,\n        // and there are items in the collection or allowEmptyCollection is true.\n        if (isFocused && (filteredCollection.size > 0 || allowsEmptyCollection) && !triggerState.isOpen && inputValue !== lastValue && menuTrigger !== 'manual') open(null, 'input');\n        // Close the menu if the collection is empty. Don't close menu if filtered collection size is 0\n        // but we are currently showing all items via button press\n        if (!showAllItems && !allowsEmptyCollection && triggerState.isOpen && filteredCollection.size === 0) closeMenu();\n        // Close when an item is selected.\n        if (selectedKey != null && selectedKey !== lastSelectedKey.current) closeMenu();\n        // Clear focused key when input value changes and display filtered collection again.\n        if (inputValue !== lastValue) {\n            selectionManager.setFocusedKey(null);\n            setShowAllItems(false);\n            // Set selectedKey to null when the user clears the input.\n            // If controlled, this is the application developer's responsibility.\n            if (inputValue === '' && (props.inputValue === undefined || props.selectedKey === undefined)) setSelectedKey(null);\n        }\n        // If the selectedKey changed, update the input value.\n        // Do nothing if both inputValue and selectedKey are controlled.\n        // In this case, it's the user's responsibility to update inputValue in onSelectionChange.\n        if (selectedKey !== lastSelectedKey.current && (props.inputValue === undefined || props.selectedKey === undefined)) resetInputValue();\n        else if (lastValue !== inputValue) setLastValue(inputValue);\n        var _collection_getItem_textValue;\n        // Update the inputValue if the selected item's text changes from its last tracked value.\n        // This is to handle cases where a selectedKey is specified but the items aren't available (async loading) or the selected item's text value updates.\n        // Only reset if the user isn't currently within the field so we don't erroneously modify user input.\n        // If inputValue is controlled, it is the user's responsibility to update the inputValue when items change.\n        let selectedItemText = selectedKey != null ? (_collection_getItem_textValue = (_collection_getItem = collection.getItem(selectedKey)) === null || _collection_getItem === void 0 ? void 0 : _collection_getItem.textValue) !== null && _collection_getItem_textValue !== void 0 ? _collection_getItem_textValue : '' : '';\n        if (!isFocused && selectedKey != null && props.inputValue === undefined && selectedKey === lastSelectedKey.current) {\n            if (lastSelectedKeyText.current !== selectedItemText) {\n                setLastValue(selectedItemText);\n                setInputValue(selectedItemText);\n            }\n        }\n        lastSelectedKey.current = selectedKey;\n        lastSelectedKeyText.current = selectedItemText;\n    });\n    let validation = (0, _react_stately_form__WEBPACK_IMPORTED_MODULE_4__.useFormValidationState)({\n        ...props,\n        value: (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>({\n                inputValue: inputValue,\n                selectedKey: selectedKey\n            }), [\n            inputValue,\n            selectedKey\n        ])\n    });\n    // Revert input value and close menu\n    let revert = ()=>{\n        if (allowsCustomValue && selectedKey == null) commitCustomValue();\n        else commitSelection();\n    };\n    let commitCustomValue = ()=>{\n        lastSelectedKey.current = null;\n        setSelectedKey(null);\n        closeMenu();\n    };\n    let commitSelection = ()=>{\n        // If multiple things are controlled, call onSelectionChange\n        if (props.selectedKey !== undefined && props.inputValue !== undefined) {\n            var _props_onSelectionChange, _collection_getItem;\n            (_props_onSelectionChange = props.onSelectionChange) === null || _props_onSelectionChange === void 0 ? void 0 : _props_onSelectionChange.call(props, selectedKey);\n            var _collection_getItem_textValue;\n            // Stop menu from reopening from useEffect\n            let itemText = selectedKey != null ? (_collection_getItem_textValue = (_collection_getItem = collection.getItem(selectedKey)) === null || _collection_getItem === void 0 ? void 0 : _collection_getItem.textValue) !== null && _collection_getItem_textValue !== void 0 ? _collection_getItem_textValue : '' : '';\n            setLastValue(itemText);\n            closeMenu();\n        } else {\n            // If only a single aspect of combobox is controlled, reset input value and close menu for the user\n            resetInputValue();\n            closeMenu();\n        }\n    };\n    const commitValue = ()=>{\n        if (allowsCustomValue) {\n            var _collection_getItem;\n            var _collection_getItem_textValue;\n            const itemText = selectedKey != null ? (_collection_getItem_textValue = (_collection_getItem = collection.getItem(selectedKey)) === null || _collection_getItem === void 0 ? void 0 : _collection_getItem.textValue) !== null && _collection_getItem_textValue !== void 0 ? _collection_getItem_textValue : '' : '';\n            inputValue === itemText ? commitSelection() : commitCustomValue();\n        } else // Reset inputValue and close menu\n        commitSelection();\n    };\n    let commit = ()=>{\n        if (triggerState.isOpen && selectionManager.focusedKey != null) {\n            // Reset inputValue and close menu here if the selected key is already the focused key. Otherwise\n            // fire onSelectionChange to allow the application to control the closing.\n            if (selectedKey === selectionManager.focusedKey) commitSelection();\n            else setSelectedKey(selectionManager.focusedKey);\n        } else commitValue();\n    };\n    let valueOnFocus = (0, react__WEBPACK_IMPORTED_MODULE_0__.useRef)(inputValue);\n    let setFocused = (isFocused)=>{\n        if (isFocused) {\n            valueOnFocus.current = inputValue;\n            if (menuTrigger === 'focus' && !props.isReadOnly) open(null, 'focus');\n        } else {\n            if (shouldCloseOnBlur) commitValue();\n            if (inputValue !== valueOnFocus.current) validation.commitValidation();\n        }\n        setFocusedState(isFocused);\n    };\n    let displayedCollection = (0, react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        if (triggerState.isOpen) {\n            if (showAllItems) return originalCollection;\n            else return filteredCollection;\n        } else return lastCollection;\n    }, [\n        triggerState.isOpen,\n        originalCollection,\n        filteredCollection,\n        showAllItems,\n        lastCollection\n    ]);\n    var _props_defaultSelectedKey;\n    let defaultSelectedKey = (_props_defaultSelectedKey = props.defaultSelectedKey) !== null && _props_defaultSelectedKey !== void 0 ? _props_defaultSelectedKey : initialSelectedKey;\n    var _getDefaultInputValue;\n    return {\n        ...validation,\n        ...triggerState,\n        focusStrategy: focusStrategy,\n        toggle: toggle,\n        open: open,\n        close: commitValue,\n        selectionManager: selectionManager,\n        selectedKey: selectedKey,\n        defaultSelectedKey: defaultSelectedKey,\n        setSelectedKey: setSelectedKey,\n        disabledKeys: disabledKeys,\n        isFocused: isFocused,\n        setFocused: setFocused,\n        selectedItem: selectedItem,\n        collection: displayedCollection,\n        inputValue: inputValue,\n        defaultInputValue: (_getDefaultInputValue = $a9e7382a7d111cb5$var$getDefaultInputValue(props.defaultInputValue, defaultSelectedKey, collection)) !== null && _getDefaultInputValue !== void 0 ? _getDefaultInputValue : initialValue,\n        setInputValue: setInputValue,\n        commit: commit,\n        revert: revert\n    };\n}\nfunction $a9e7382a7d111cb5$var$filterCollection(collection, inputValue, filter) {\n    return new (0, _react_stately_list__WEBPACK_IMPORTED_MODULE_5__.ListCollection)($a9e7382a7d111cb5$var$filterNodes(collection, collection, inputValue, filter));\n}\nfunction $a9e7382a7d111cb5$var$filterNodes(collection, nodes, inputValue, filter) {\n    let filteredNode = [];\n    for (let node of nodes){\n        if (node.type === 'section' && node.hasChildNodes) {\n            let filtered = $a9e7382a7d111cb5$var$filterNodes(collection, (0, _react_stately_collections__WEBPACK_IMPORTED_MODULE_6__.getChildNodes)(node, collection), inputValue, filter);\n            if ([\n                ...filtered\n            ].some((node)=>node.type === 'item')) filteredNode.push({\n                ...node,\n                childNodes: filtered\n            });\n        } else if (node.type === 'item' && filter(node.textValue, inputValue)) filteredNode.push({\n            ...node\n        });\n        else if (node.type !== 'item') filteredNode.push({\n            ...node\n        });\n    }\n    return filteredNode;\n}\nfunction $a9e7382a7d111cb5$var$getDefaultInputValue(defaultInputValue, selectedKey, collection) {\n    if (defaultInputValue == null) {\n        var _collection_getItem;\n        var _collection_getItem_textValue;\n        if (selectedKey != null) return (_collection_getItem_textValue = (_collection_getItem = collection.getItem(selectedKey)) === null || _collection_getItem === void 0 ? void 0 : _collection_getItem.textValue) !== null && _collection_getItem_textValue !== void 0 ? _collection_getItem_textValue : '';\n    }\n    return defaultInputValue;\n}\n\n\n\n//# sourceMappingURL=useComboBoxState.module.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1zdGF0ZWx5K2NvbWJvYm94QDMuMTEuMV9yZWFjdEAxOC4zLjEvbm9kZV9tb2R1bGVzL0ByZWFjdC1zdGF0ZWx5L2NvbWJvYm94L2Rpc3QvdXNlQ29tYm9Cb3hTdGF0ZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNEY7QUFDWDtBQUN3RDtBQUMrQjtBQUNuRjtBQUNXOztBQUVoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0EsVUFBVSw0TUFBNE07QUFDdE4sOENBQThDLDJDQUFlO0FBQzdELDJDQUEyQywyQ0FBZTtBQUMxRCxnREFBZ0QsMkNBQWU7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLCtLQUErSyxNQUFNLHlFQUErQjtBQUM5TjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMENBQTBDLG9FQUF5QjtBQUNuRSxtQ0FBbUMsMkNBQWU7QUFDbEQsNkJBQTZCLDJDQUFlO0FBQzVDO0FBQ0E7QUFDQSxpQ0FBaUMsMENBQWM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELDJDQUFlO0FBQ2pFO0FBQ0EsOEJBQThCLHlDQUFhO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkVBQTZCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsOENBQWtCO0FBQ3JEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw4Q0FBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBa0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLDJDQUFlO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseUNBQWE7QUFDM0M7QUFDQSxrQ0FBa0MseUNBQWE7QUFDL0M7QUFDQTtBQUNBLFFBQVEsNENBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx5QkFBeUIsdUVBQTZCO0FBQ3REO0FBQ0EsbUJBQW1CLDBDQUFjO0FBQ2pDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsMkJBQTJCLHlDQUFhO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMENBQWM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsK0RBQXFCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkUscUVBQW9CO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR3VFO0FBQ3ZFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHJjcnQtYnVpbGRlci9idWlsZGVyLWFwcC8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LXN0YXRlbHkrY29tYm9ib3hAMy4xMS4xX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvQHJlYWN0LXN0YXRlbHkvY29tYm9ib3gvZGlzdC91c2VDb21ib0JveFN0YXRlLm1qcz8zZjc4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7dXNlRm9ybVZhbGlkYXRpb25TdGF0ZSBhcyAkNDlCSlAkdXNlRm9ybVZhbGlkYXRpb25TdGF0ZX0gZnJvbSBcIkByZWFjdC1zdGF0ZWx5L2Zvcm1cIjtcbmltcG9ydCB7Z2V0Q2hpbGROb2RlcyBhcyAkNDlCSlAkZ2V0Q2hpbGROb2Rlc30gZnJvbSBcIkByZWFjdC1zdGF0ZWx5L2NvbGxlY3Rpb25zXCI7XG5pbXBvcnQge3VzZVNpbmdsZVNlbGVjdExpc3RTdGF0ZSBhcyAkNDlCSlAkdXNlU2luZ2xlU2VsZWN0TGlzdFN0YXRlLCBMaXN0Q29sbGVjdGlvbiBhcyAkNDlCSlAkTGlzdENvbGxlY3Rpb259IGZyb20gXCJAcmVhY3Qtc3RhdGVseS9saXN0XCI7XG5pbXBvcnQge3VzZVN0YXRlIGFzICQ0OUJKUCR1c2VTdGF0ZSwgdXNlTWVtbyBhcyAkNDlCSlAkdXNlTWVtbywgdXNlUmVmIGFzICQ0OUJKUCR1c2VSZWYsIHVzZUNhbGxiYWNrIGFzICQ0OUJKUCR1c2VDYWxsYmFjaywgdXNlRWZmZWN0IGFzICQ0OUJKUCR1c2VFZmZlY3R9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHt1c2VDb250cm9sbGVkU3RhdGUgYXMgJDQ5QkpQJHVzZUNvbnRyb2xsZWRTdGF0ZX0gZnJvbSBcIkByZWFjdC1zdGF0ZWx5L3V0aWxzXCI7XG5pbXBvcnQge3VzZU92ZXJsYXlUcmlnZ2VyU3RhdGUgYXMgJDQ5QkpQJHVzZU92ZXJsYXlUcmlnZ2VyU3RhdGV9IGZyb20gXCJAcmVhY3Qtc3RhdGVseS9vdmVybGF5c1wiO1xuXG4vKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gXG5cblxuXG5cblxuZnVuY3Rpb24gJGE5ZTczODJhN2QxMTFjYjUkZXhwb3J0JGI0NTNhM2JmZDRhNWZhOWUocHJvcHMpIHtcbiAgICB2YXIgX2NvbGxlY3Rpb25fZ2V0SXRlbTtcbiAgICBsZXQgeyBkZWZhdWx0RmlsdGVyOiBkZWZhdWx0RmlsdGVyLCBtZW51VHJpZ2dlcjogbWVudVRyaWdnZXIgPSAnaW5wdXQnLCBhbGxvd3NFbXB0eUNvbGxlY3Rpb246IGFsbG93c0VtcHR5Q29sbGVjdGlvbiA9IGZhbHNlLCBhbGxvd3NDdXN0b21WYWx1ZTogYWxsb3dzQ3VzdG9tVmFsdWUsIHNob3VsZENsb3NlT25CbHVyOiBzaG91bGRDbG9zZU9uQmx1ciA9IHRydWUgfSA9IHByb3BzO1xuICAgIGxldCBbc2hvd0FsbEl0ZW1zLCBzZXRTaG93QWxsSXRlbXNdID0gKDAsICQ0OUJKUCR1c2VTdGF0ZSkoZmFsc2UpO1xuICAgIGxldCBbaXNGb2N1c2VkLCBzZXRGb2N1c2VkU3RhdGVdID0gKDAsICQ0OUJKUCR1c2VTdGF0ZSkoZmFsc2UpO1xuICAgIGxldCBbZm9jdXNTdHJhdGVneSwgc2V0Rm9jdXNTdHJhdGVneV0gPSAoMCwgJDQ5QkpQJHVzZVN0YXRlKShudWxsKTtcbiAgICBsZXQgb25TZWxlY3Rpb25DaGFuZ2UgPSAoa2V5KT0+e1xuICAgICAgICBpZiAocHJvcHMub25TZWxlY3Rpb25DaGFuZ2UpIHByb3BzLm9uU2VsZWN0aW9uQ2hhbmdlKGtleSk7XG4gICAgICAgIC8vIElmIGtleSBpcyB0aGUgc2FtZSwgcmVzZXQgdGhlIGlucHV0VmFsdWUgYW5kIGNsb3NlIHRoZSBtZW51XG4gICAgICAgIC8vIChzY2VuYXJpbzogdXNlciBjbGlja3Mgb24gYWxyZWFkeSBzZWxlY3RlZCBvcHRpb24pXG4gICAgICAgIGlmIChrZXkgPT09IHNlbGVjdGVkS2V5KSB7XG4gICAgICAgICAgICByZXNldElucHV0VmFsdWUoKTtcbiAgICAgICAgICAgIGNsb3NlTWVudSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgX3Byb3BzX2l0ZW1zO1xuICAgIGxldCB7IGNvbGxlY3Rpb246IGNvbGxlY3Rpb24sIHNlbGVjdGlvbk1hbmFnZXI6IHNlbGVjdGlvbk1hbmFnZXIsIHNlbGVjdGVkS2V5OiBzZWxlY3RlZEtleSwgc2V0U2VsZWN0ZWRLZXk6IHNldFNlbGVjdGVkS2V5LCBzZWxlY3RlZEl0ZW06IHNlbGVjdGVkSXRlbSwgZGlzYWJsZWRLZXlzOiBkaXNhYmxlZEtleXMgfSA9ICgwLCAkNDlCSlAkdXNlU2luZ2xlU2VsZWN0TGlzdFN0YXRlKSh7XG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBvblNlbGVjdGlvbkNoYW5nZTogb25TZWxlY3Rpb25DaGFuZ2UsXG4gICAgICAgIGl0ZW1zOiAoX3Byb3BzX2l0ZW1zID0gcHJvcHMuaXRlbXMpICE9PSBudWxsICYmIF9wcm9wc19pdGVtcyAhPT0gdm9pZCAwID8gX3Byb3BzX2l0ZW1zIDogcHJvcHMuZGVmYXVsdEl0ZW1zXG4gICAgfSk7XG4gICAgbGV0IFtpbnB1dFZhbHVlLCBzZXRJbnB1dFZhbHVlXSA9ICgwLCAkNDlCSlAkdXNlQ29udHJvbGxlZFN0YXRlKShwcm9wcy5pbnB1dFZhbHVlLCAkYTllNzM4MmE3ZDExMWNiNSR2YXIkZ2V0RGVmYXVsdElucHV0VmFsdWUocHJvcHMuZGVmYXVsdElucHV0VmFsdWUsIHNlbGVjdGVkS2V5LCBjb2xsZWN0aW9uKSB8fCAnJywgcHJvcHMub25JbnB1dENoYW5nZSk7XG4gICAgbGV0IFtpbml0aWFsU2VsZWN0ZWRLZXldID0gKDAsICQ0OUJKUCR1c2VTdGF0ZSkoc2VsZWN0ZWRLZXkpO1xuICAgIGxldCBbaW5pdGlhbFZhbHVlXSA9ICgwLCAkNDlCSlAkdXNlU3RhdGUpKGlucHV0VmFsdWUpO1xuICAgIC8vIFByZXNlcnZlIG9yaWdpbmFsIGNvbGxlY3Rpb24gc28gd2UgY2FuIHNob3cgYWxsIGl0ZW1zIG9uIGRlbWFuZFxuICAgIGxldCBvcmlnaW5hbENvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgIGxldCBmaWx0ZXJlZENvbGxlY3Rpb24gPSAoMCwgJDQ5QkpQJHVzZU1lbW8pKCgpPT4vLyBObyBkZWZhdWx0IGZpbHRlciBpZiBpdGVtcyBhcmUgY29udHJvbGxlZC5cbiAgICAgICAgcHJvcHMuaXRlbXMgIT0gbnVsbCB8fCAhZGVmYXVsdEZpbHRlciA/IGNvbGxlY3Rpb24gOiAkYTllNzM4MmE3ZDExMWNiNSR2YXIkZmlsdGVyQ29sbGVjdGlvbihjb2xsZWN0aW9uLCBpbnB1dFZhbHVlLCBkZWZhdWx0RmlsdGVyKSwgW1xuICAgICAgICBjb2xsZWN0aW9uLFxuICAgICAgICBpbnB1dFZhbHVlLFxuICAgICAgICBkZWZhdWx0RmlsdGVyLFxuICAgICAgICBwcm9wcy5pdGVtc1xuICAgIF0pO1xuICAgIGxldCBbbGFzdENvbGxlY3Rpb24sIHNldExhc3RDb2xsZWN0aW9uXSA9ICgwLCAkNDlCSlAkdXNlU3RhdGUpKGZpbHRlcmVkQ29sbGVjdGlvbik7XG4gICAgLy8gVHJhY2sgd2hhdCBhY3Rpb24gaXMgYXR0ZW1wdGluZyB0byBvcGVuIHRoZSBtZW51XG4gICAgbGV0IG1lbnVPcGVuVHJpZ2dlciA9ICgwLCAkNDlCSlAkdXNlUmVmKSgnZm9jdXMnKTtcbiAgICBsZXQgb25PcGVuQ2hhbmdlID0gKG9wZW4pPT57XG4gICAgICAgIGlmIChwcm9wcy5vbk9wZW5DaGFuZ2UpIHByb3BzLm9uT3BlbkNoYW5nZShvcGVuLCBvcGVuID8gbWVudU9wZW5UcmlnZ2VyLmN1cnJlbnQgOiB1bmRlZmluZWQpO1xuICAgICAgICBzZWxlY3Rpb25NYW5hZ2VyLnNldEZvY3VzZWQob3Blbik7XG4gICAgICAgIGlmICghb3Blbikgc2VsZWN0aW9uTWFuYWdlci5zZXRGb2N1c2VkS2V5KG51bGwpO1xuICAgIH07XG4gICAgbGV0IHRyaWdnZXJTdGF0ZSA9ICgwLCAkNDlCSlAkdXNlT3ZlcmxheVRyaWdnZXJTdGF0ZSkoe1xuICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgb25PcGVuQ2hhbmdlOiBvbk9wZW5DaGFuZ2UsXG4gICAgICAgIGlzT3BlbjogdW5kZWZpbmVkLFxuICAgICAgICBkZWZhdWx0T3BlbjogdW5kZWZpbmVkXG4gICAgfSk7XG4gICAgbGV0IG9wZW4gPSAoZm9jdXNTdHJhdGVneSA9IG51bGwsIHRyaWdnZXIpPT57XG4gICAgICAgIGxldCBkaXNwbGF5QWxsSXRlbXMgPSB0cmlnZ2VyID09PSAnbWFudWFsJyB8fCB0cmlnZ2VyID09PSAnZm9jdXMnICYmIG1lbnVUcmlnZ2VyID09PSAnZm9jdXMnO1xuICAgICAgICAvLyBQcmV2ZW50IG9wZW4gb3BlcmF0aW9ucyBmcm9tIHRyaWdnZXJpbmcgaWYgdGhlcmUgaXMgbm90aGluZyB0byBkaXNwbGF5XG4gICAgICAgIC8vIEFsc28gcHJldmVudCBvcGVuIG9wZXJhdGlvbnMgZnJvbSB0cmlnZ2VyaW5nIGlmIGl0ZW1zIGFyZSB1bmNvbnRyb2xsZWQgYnV0IGRlZmF1bHRJdGVtcyBpcyBlbXB0eSwgZXZlbiBpZiBkaXNwbGF5QWxsSXRlbXMgaXMgdHJ1ZS5cbiAgICAgICAgLy8gVGhpcyBpcyB0byBwcmV2ZW50IGNvbWJvYm94ZXMgd2l0aCBlbXB0eSBkZWZhdWx0SXRlbXMgZnJvbSBvcGVuaW5nIGJ1dCBhbGxvdyBjb250cm9sbGVkIGl0ZW1zIGNvbWJvYm94ZXMgdG8gb3BlbiBldmVuIGlmIHRoZSBpbml0YWwgbGlzdCBpcyBlbXB0eSAoYXNzdW1wdGlvbiBpcyB1c2VyIHdpbGwgcHJvdmlkZSBzd2FwIHRoZSBlbXB0eSBsaXN0IHdpdGggYSBiYXNlIGxpc3QgdmlhIG9uT3BlbkNoYW5nZSByZXR1cm5pbmcgYG1lbnVUcmlnZ2VyYCBtYW51YWwpXG4gICAgICAgIGlmIChhbGxvd3NFbXB0eUNvbGxlY3Rpb24gfHwgZmlsdGVyZWRDb2xsZWN0aW9uLnNpemUgPiAwIHx8IGRpc3BsYXlBbGxJdGVtcyAmJiBvcmlnaW5hbENvbGxlY3Rpb24uc2l6ZSA+IDAgfHwgcHJvcHMuaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChkaXNwbGF5QWxsSXRlbXMgJiYgIXRyaWdnZXJTdGF0ZS5pc09wZW4gJiYgcHJvcHMuaXRlbXMgPT09IHVuZGVmaW5lZCkgLy8gU2hvdyBhbGwgaXRlbXMgaWYgbWVudSBpcyBtYW51YWxseSBvcGVuZWQuIE9ubHkgY2FyZSBhYm91dCB0aGlzIGlmIGl0ZW1zIGFyZSB1bmRlZmluZWRcbiAgICAgICAgICAgIHNldFNob3dBbGxJdGVtcyh0cnVlKTtcbiAgICAgICAgICAgIG1lbnVPcGVuVHJpZ2dlci5jdXJyZW50ID0gdHJpZ2dlcjtcbiAgICAgICAgICAgIHNldEZvY3VzU3RyYXRlZ3koZm9jdXNTdHJhdGVneSk7XG4gICAgICAgICAgICB0cmlnZ2VyU3RhdGUub3BlbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBsZXQgdG9nZ2xlID0gKGZvY3VzU3RyYXRlZ3kgPSBudWxsLCB0cmlnZ2VyKT0+e1xuICAgICAgICBsZXQgZGlzcGxheUFsbEl0ZW1zID0gdHJpZ2dlciA9PT0gJ21hbnVhbCcgfHwgdHJpZ2dlciA9PT0gJ2ZvY3VzJyAmJiBtZW51VHJpZ2dlciA9PT0gJ2ZvY3VzJztcbiAgICAgICAgLy8gSWYgdGhlIG1lbnUgaXMgY2xvc2VkIGFuZCB0aGVyZSBpcyBub3RoaW5nIHRvIGRpc3BsYXksIGVhcmx5IHJldHVybiBzbyB0b2dnbGUgaXNuJ3QgY2FsbGVkIHRvIHByZXZlbnQgZXh0cmFuZW91cyBvbk9wZW5DaGFuZ2VcbiAgICAgICAgaWYgKCEoYWxsb3dzRW1wdHlDb2xsZWN0aW9uIHx8IGZpbHRlcmVkQ29sbGVjdGlvbi5zaXplID4gMCB8fCBkaXNwbGF5QWxsSXRlbXMgJiYgb3JpZ2luYWxDb2xsZWN0aW9uLnNpemUgPiAwIHx8IHByb3BzLml0ZW1zKSAmJiAhdHJpZ2dlclN0YXRlLmlzT3BlbikgcmV0dXJuO1xuICAgICAgICBpZiAoZGlzcGxheUFsbEl0ZW1zICYmICF0cmlnZ2VyU3RhdGUuaXNPcGVuICYmIHByb3BzLml0ZW1zID09PSB1bmRlZmluZWQpIC8vIFNob3cgYWxsIGl0ZW1zIGlmIG1lbnUgaXMgdG9nZ2xlZCBvcGVuLiBPbmx5IGNhcmUgYWJvdXQgdGhpcyBpZiBpdGVtcyBhcmUgdW5kZWZpbmVkXG4gICAgICAgIHNldFNob3dBbGxJdGVtcyh0cnVlKTtcbiAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIG1lbnVPcGVuVHJpZ2dlciBpZiBtZW51IGlzIGN1cnJlbnRseSBjbG9zZWRcbiAgICAgICAgaWYgKCF0cmlnZ2VyU3RhdGUuaXNPcGVuKSBtZW51T3BlblRyaWdnZXIuY3VycmVudCA9IHRyaWdnZXI7XG4gICAgICAgIHRvZ2dsZU1lbnUoZm9jdXNTdHJhdGVneSk7XG4gICAgfTtcbiAgICBsZXQgdXBkYXRlTGFzdENvbGxlY3Rpb24gPSAoMCwgJDQ5QkpQJHVzZUNhbGxiYWNrKSgoKT0+e1xuICAgICAgICBzZXRMYXN0Q29sbGVjdGlvbihzaG93QWxsSXRlbXMgPyBvcmlnaW5hbENvbGxlY3Rpb24gOiBmaWx0ZXJlZENvbGxlY3Rpb24pO1xuICAgIH0sIFtcbiAgICAgICAgc2hvd0FsbEl0ZW1zLFxuICAgICAgICBvcmlnaW5hbENvbGxlY3Rpb24sXG4gICAgICAgIGZpbHRlcmVkQ29sbGVjdGlvblxuICAgIF0pO1xuICAgIC8vIElmIG1lbnUgaXMgZ29pbmcgdG8gY2xvc2UsIHNhdmUgdGhlIGN1cnJlbnQgY29sbGVjdGlvbiBzbyB3ZSBjYW4gZnJlZXplIHRoZSBkaXNwbGF5ZWQgY29sbGVjdGlvbiB3aGVuIHRoZVxuICAgIC8vIHVzZXIgY2xpY2tzIG91dHNpZGUgdGhlIHBvcG92ZXIgdG8gY2xvc2UgdGhlIG1lbnUuIFByZXZlbnRzIHRoZSBtZW51IGNvbnRlbnRzIGZyb20gdXBkYXRpbmcgYXMgdGhlIG1lbnUgY2xvc2VzLlxuICAgIGxldCB0b2dnbGVNZW51ID0gKDAsICQ0OUJKUCR1c2VDYWxsYmFjaykoKGZvY3VzU3RyYXRlZ3kgPSBudWxsKT0+e1xuICAgICAgICBpZiAodHJpZ2dlclN0YXRlLmlzT3BlbikgdXBkYXRlTGFzdENvbGxlY3Rpb24oKTtcbiAgICAgICAgc2V0Rm9jdXNTdHJhdGVneShmb2N1c1N0cmF0ZWd5KTtcbiAgICAgICAgdHJpZ2dlclN0YXRlLnRvZ2dsZSgpO1xuICAgIH0sIFtcbiAgICAgICAgdHJpZ2dlclN0YXRlLFxuICAgICAgICB1cGRhdGVMYXN0Q29sbGVjdGlvblxuICAgIF0pO1xuICAgIGxldCBjbG9zZU1lbnUgPSAoMCwgJDQ5QkpQJHVzZUNhbGxiYWNrKSgoKT0+e1xuICAgICAgICBpZiAodHJpZ2dlclN0YXRlLmlzT3Blbikge1xuICAgICAgICAgICAgdXBkYXRlTGFzdENvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRyaWdnZXJTdGF0ZS5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfSwgW1xuICAgICAgICB0cmlnZ2VyU3RhdGUsXG4gICAgICAgIHVwZGF0ZUxhc3RDb2xsZWN0aW9uXG4gICAgXSk7XG4gICAgbGV0IFtsYXN0VmFsdWUsIHNldExhc3RWYWx1ZV0gPSAoMCwgJDQ5QkpQJHVzZVN0YXRlKShpbnB1dFZhbHVlKTtcbiAgICBsZXQgcmVzZXRJbnB1dFZhbHVlID0gKCk9PntcbiAgICAgICAgdmFyIF9jb2xsZWN0aW9uX2dldEl0ZW07XG4gICAgICAgIHZhciBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZTtcbiAgICAgICAgbGV0IGl0ZW1UZXh0ID0gc2VsZWN0ZWRLZXkgIT0gbnVsbCA/IChfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZSA9IChfY29sbGVjdGlvbl9nZXRJdGVtID0gY29sbGVjdGlvbi5nZXRJdGVtKHNlbGVjdGVkS2V5KSkgPT09IG51bGwgfHwgX2NvbGxlY3Rpb25fZ2V0SXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbGxlY3Rpb25fZ2V0SXRlbS50ZXh0VmFsdWUpICE9PSBudWxsICYmIF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlICE9PSB2b2lkIDAgPyBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZSA6ICcnIDogJyc7XG4gICAgICAgIHNldExhc3RWYWx1ZShpdGVtVGV4dCk7XG4gICAgICAgIHNldElucHV0VmFsdWUoaXRlbVRleHQpO1xuICAgIH07XG4gICAgdmFyIF9wcm9wc19zZWxlY3RlZEtleSwgX3JlZjtcbiAgICBsZXQgbGFzdFNlbGVjdGVkS2V5ID0gKDAsICQ0OUJKUCR1c2VSZWYpKChfcmVmID0gKF9wcm9wc19zZWxlY3RlZEtleSA9IHByb3BzLnNlbGVjdGVkS2V5KSAhPT0gbnVsbCAmJiBfcHJvcHNfc2VsZWN0ZWRLZXkgIT09IHZvaWQgMCA/IF9wcm9wc19zZWxlY3RlZEtleSA6IHByb3BzLmRlZmF1bHRTZWxlY3RlZEtleSkgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IG51bGwpO1xuICAgIHZhciBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZTtcbiAgICBsZXQgbGFzdFNlbGVjdGVkS2V5VGV4dCA9ICgwLCAkNDlCSlAkdXNlUmVmKShzZWxlY3RlZEtleSAhPSBudWxsID8gKF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlID0gKF9jb2xsZWN0aW9uX2dldEl0ZW0gPSBjb2xsZWN0aW9uLmdldEl0ZW0oc2VsZWN0ZWRLZXkpKSA9PT0gbnVsbCB8fCBfY29sbGVjdGlvbl9nZXRJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29sbGVjdGlvbl9nZXRJdGVtLnRleHRWYWx1ZSkgIT09IG51bGwgJiYgX2NvbGxlY3Rpb25fZ2V0SXRlbV90ZXh0VmFsdWUgIT09IHZvaWQgMCA/IF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlIDogJycgOiAnJyk7XG4gICAgLy8gaW50ZW50aW9uYWwgb21pdCBkZXBlbmRlbmN5IGFycmF5LCB3YW50IHRoaXMgdG8gaGFwcGVuIG9uIGV2ZXJ5IHJlbmRlclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICAoMCwgJDQ5QkpQJHVzZUVmZmVjdCkoKCk9PntcbiAgICAgICAgdmFyIF9jb2xsZWN0aW9uX2dldEl0ZW07XG4gICAgICAgIC8vIE9wZW4gYW5kIGNsb3NlIG1lbnUgYXV0b21hdGljYWxseSB3aGVuIHRoZSBpbnB1dCB2YWx1ZSBjaGFuZ2VzIGlmIHRoZSBpbnB1dCBpcyBmb2N1c2VkLFxuICAgICAgICAvLyBhbmQgdGhlcmUgYXJlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uIG9yIGFsbG93RW1wdHlDb2xsZWN0aW9uIGlzIHRydWUuXG4gICAgICAgIGlmIChpc0ZvY3VzZWQgJiYgKGZpbHRlcmVkQ29sbGVjdGlvbi5zaXplID4gMCB8fCBhbGxvd3NFbXB0eUNvbGxlY3Rpb24pICYmICF0cmlnZ2VyU3RhdGUuaXNPcGVuICYmIGlucHV0VmFsdWUgIT09IGxhc3RWYWx1ZSAmJiBtZW51VHJpZ2dlciAhPT0gJ21hbnVhbCcpIG9wZW4obnVsbCwgJ2lucHV0Jyk7XG4gICAgICAgIC8vIENsb3NlIHRoZSBtZW51IGlmIHRoZSBjb2xsZWN0aW9uIGlzIGVtcHR5LiBEb24ndCBjbG9zZSBtZW51IGlmIGZpbHRlcmVkIGNvbGxlY3Rpb24gc2l6ZSBpcyAwXG4gICAgICAgIC8vIGJ1dCB3ZSBhcmUgY3VycmVudGx5IHNob3dpbmcgYWxsIGl0ZW1zIHZpYSBidXR0b24gcHJlc3NcbiAgICAgICAgaWYgKCFzaG93QWxsSXRlbXMgJiYgIWFsbG93c0VtcHR5Q29sbGVjdGlvbiAmJiB0cmlnZ2VyU3RhdGUuaXNPcGVuICYmIGZpbHRlcmVkQ29sbGVjdGlvbi5zaXplID09PSAwKSBjbG9zZU1lbnUoKTtcbiAgICAgICAgLy8gQ2xvc2Ugd2hlbiBhbiBpdGVtIGlzIHNlbGVjdGVkLlxuICAgICAgICBpZiAoc2VsZWN0ZWRLZXkgIT0gbnVsbCAmJiBzZWxlY3RlZEtleSAhPT0gbGFzdFNlbGVjdGVkS2V5LmN1cnJlbnQpIGNsb3NlTWVudSgpO1xuICAgICAgICAvLyBDbGVhciBmb2N1c2VkIGtleSB3aGVuIGlucHV0IHZhbHVlIGNoYW5nZXMgYW5kIGRpc3BsYXkgZmlsdGVyZWQgY29sbGVjdGlvbiBhZ2Fpbi5cbiAgICAgICAgaWYgKGlucHV0VmFsdWUgIT09IGxhc3RWYWx1ZSkge1xuICAgICAgICAgICAgc2VsZWN0aW9uTWFuYWdlci5zZXRGb2N1c2VkS2V5KG51bGwpO1xuICAgICAgICAgICAgc2V0U2hvd0FsbEl0ZW1zKGZhbHNlKTtcbiAgICAgICAgICAgIC8vIFNldCBzZWxlY3RlZEtleSB0byBudWxsIHdoZW4gdGhlIHVzZXIgY2xlYXJzIHRoZSBpbnB1dC5cbiAgICAgICAgICAgIC8vIElmIGNvbnRyb2xsZWQsIHRoaXMgaXMgdGhlIGFwcGxpY2F0aW9uIGRldmVsb3BlcidzIHJlc3BvbnNpYmlsaXR5LlxuICAgICAgICAgICAgaWYgKGlucHV0VmFsdWUgPT09ICcnICYmIChwcm9wcy5pbnB1dFZhbHVlID09PSB1bmRlZmluZWQgfHwgcHJvcHMuc2VsZWN0ZWRLZXkgPT09IHVuZGVmaW5lZCkpIHNldFNlbGVjdGVkS2V5KG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBzZWxlY3RlZEtleSBjaGFuZ2VkLCB1cGRhdGUgdGhlIGlucHV0IHZhbHVlLlxuICAgICAgICAvLyBEbyBub3RoaW5nIGlmIGJvdGggaW5wdXRWYWx1ZSBhbmQgc2VsZWN0ZWRLZXkgYXJlIGNvbnRyb2xsZWQuXG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSwgaXQncyB0aGUgdXNlcidzIHJlc3BvbnNpYmlsaXR5IHRvIHVwZGF0ZSBpbnB1dFZhbHVlIGluIG9uU2VsZWN0aW9uQ2hhbmdlLlxuICAgICAgICBpZiAoc2VsZWN0ZWRLZXkgIT09IGxhc3RTZWxlY3RlZEtleS5jdXJyZW50ICYmIChwcm9wcy5pbnB1dFZhbHVlID09PSB1bmRlZmluZWQgfHwgcHJvcHMuc2VsZWN0ZWRLZXkgPT09IHVuZGVmaW5lZCkpIHJlc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICBlbHNlIGlmIChsYXN0VmFsdWUgIT09IGlucHV0VmFsdWUpIHNldExhc3RWYWx1ZShpbnB1dFZhbHVlKTtcbiAgICAgICAgdmFyIF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGlucHV0VmFsdWUgaWYgdGhlIHNlbGVjdGVkIGl0ZW0ncyB0ZXh0IGNoYW5nZXMgZnJvbSBpdHMgbGFzdCB0cmFja2VkIHZhbHVlLlxuICAgICAgICAvLyBUaGlzIGlzIHRvIGhhbmRsZSBjYXNlcyB3aGVyZSBhIHNlbGVjdGVkS2V5IGlzIHNwZWNpZmllZCBidXQgdGhlIGl0ZW1zIGFyZW4ndCBhdmFpbGFibGUgKGFzeW5jIGxvYWRpbmcpIG9yIHRoZSBzZWxlY3RlZCBpdGVtJ3MgdGV4dCB2YWx1ZSB1cGRhdGVzLlxuICAgICAgICAvLyBPbmx5IHJlc2V0IGlmIHRoZSB1c2VyIGlzbid0IGN1cnJlbnRseSB3aXRoaW4gdGhlIGZpZWxkIHNvIHdlIGRvbid0IGVycm9uZW91c2x5IG1vZGlmeSB1c2VyIGlucHV0LlxuICAgICAgICAvLyBJZiBpbnB1dFZhbHVlIGlzIGNvbnRyb2xsZWQsIGl0IGlzIHRoZSB1c2VyJ3MgcmVzcG9uc2liaWxpdHkgdG8gdXBkYXRlIHRoZSBpbnB1dFZhbHVlIHdoZW4gaXRlbXMgY2hhbmdlLlxuICAgICAgICBsZXQgc2VsZWN0ZWRJdGVtVGV4dCA9IHNlbGVjdGVkS2V5ICE9IG51bGwgPyAoX2NvbGxlY3Rpb25fZ2V0SXRlbV90ZXh0VmFsdWUgPSAoX2NvbGxlY3Rpb25fZ2V0SXRlbSA9IGNvbGxlY3Rpb24uZ2V0SXRlbShzZWxlY3RlZEtleSkpID09PSBudWxsIHx8IF9jb2xsZWN0aW9uX2dldEl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jb2xsZWN0aW9uX2dldEl0ZW0udGV4dFZhbHVlKSAhPT0gbnVsbCAmJiBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZSAhPT0gdm9pZCAwID8gX2NvbGxlY3Rpb25fZ2V0SXRlbV90ZXh0VmFsdWUgOiAnJyA6ICcnO1xuICAgICAgICBpZiAoIWlzRm9jdXNlZCAmJiBzZWxlY3RlZEtleSAhPSBudWxsICYmIHByb3BzLmlucHV0VmFsdWUgPT09IHVuZGVmaW5lZCAmJiBzZWxlY3RlZEtleSA9PT0gbGFzdFNlbGVjdGVkS2V5LmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGlmIChsYXN0U2VsZWN0ZWRLZXlUZXh0LmN1cnJlbnQgIT09IHNlbGVjdGVkSXRlbVRleHQpIHtcbiAgICAgICAgICAgICAgICBzZXRMYXN0VmFsdWUoc2VsZWN0ZWRJdGVtVGV4dCk7XG4gICAgICAgICAgICAgICAgc2V0SW5wdXRWYWx1ZShzZWxlY3RlZEl0ZW1UZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsYXN0U2VsZWN0ZWRLZXkuY3VycmVudCA9IHNlbGVjdGVkS2V5O1xuICAgICAgICBsYXN0U2VsZWN0ZWRLZXlUZXh0LmN1cnJlbnQgPSBzZWxlY3RlZEl0ZW1UZXh0O1xuICAgIH0pO1xuICAgIGxldCB2YWxpZGF0aW9uID0gKDAsICQ0OUJKUCR1c2VGb3JtVmFsaWRhdGlvblN0YXRlKSh7XG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICB2YWx1ZTogKDAsICQ0OUJKUCR1c2VNZW1vKSgoKT0+KHtcbiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlOiBpbnB1dFZhbHVlLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkS2V5OiBzZWxlY3RlZEtleVxuICAgICAgICAgICAgfSksIFtcbiAgICAgICAgICAgIGlucHV0VmFsdWUsXG4gICAgICAgICAgICBzZWxlY3RlZEtleVxuICAgICAgICBdKVxuICAgIH0pO1xuICAgIC8vIFJldmVydCBpbnB1dCB2YWx1ZSBhbmQgY2xvc2UgbWVudVxuICAgIGxldCByZXZlcnQgPSAoKT0+e1xuICAgICAgICBpZiAoYWxsb3dzQ3VzdG9tVmFsdWUgJiYgc2VsZWN0ZWRLZXkgPT0gbnVsbCkgY29tbWl0Q3VzdG9tVmFsdWUoKTtcbiAgICAgICAgZWxzZSBjb21taXRTZWxlY3Rpb24oKTtcbiAgICB9O1xuICAgIGxldCBjb21taXRDdXN0b21WYWx1ZSA9ICgpPT57XG4gICAgICAgIGxhc3RTZWxlY3RlZEtleS5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgc2V0U2VsZWN0ZWRLZXkobnVsbCk7XG4gICAgICAgIGNsb3NlTWVudSgpO1xuICAgIH07XG4gICAgbGV0IGNvbW1pdFNlbGVjdGlvbiA9ICgpPT57XG4gICAgICAgIC8vIElmIG11bHRpcGxlIHRoaW5ncyBhcmUgY29udHJvbGxlZCwgY2FsbCBvblNlbGVjdGlvbkNoYW5nZVxuICAgICAgICBpZiAocHJvcHMuc2VsZWN0ZWRLZXkgIT09IHVuZGVmaW5lZCAmJiBwcm9wcy5pbnB1dFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBfcHJvcHNfb25TZWxlY3Rpb25DaGFuZ2UsIF9jb2xsZWN0aW9uX2dldEl0ZW07XG4gICAgICAgICAgICAoX3Byb3BzX29uU2VsZWN0aW9uQ2hhbmdlID0gcHJvcHMub25TZWxlY3Rpb25DaGFuZ2UpID09PSBudWxsIHx8IF9wcm9wc19vblNlbGVjdGlvbkNoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzX29uU2VsZWN0aW9uQ2hhbmdlLmNhbGwocHJvcHMsIHNlbGVjdGVkS2V5KTtcbiAgICAgICAgICAgIHZhciBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZTtcbiAgICAgICAgICAgIC8vIFN0b3AgbWVudSBmcm9tIHJlb3BlbmluZyBmcm9tIHVzZUVmZmVjdFxuICAgICAgICAgICAgbGV0IGl0ZW1UZXh0ID0gc2VsZWN0ZWRLZXkgIT0gbnVsbCA/IChfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZSA9IChfY29sbGVjdGlvbl9nZXRJdGVtID0gY29sbGVjdGlvbi5nZXRJdGVtKHNlbGVjdGVkS2V5KSkgPT09IG51bGwgfHwgX2NvbGxlY3Rpb25fZ2V0SXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbGxlY3Rpb25fZ2V0SXRlbS50ZXh0VmFsdWUpICE9PSBudWxsICYmIF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlICE9PSB2b2lkIDAgPyBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZSA6ICcnIDogJyc7XG4gICAgICAgICAgICBzZXRMYXN0VmFsdWUoaXRlbVRleHQpO1xuICAgICAgICAgICAgY2xvc2VNZW51KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBvbmx5IGEgc2luZ2xlIGFzcGVjdCBvZiBjb21ib2JveCBpcyBjb250cm9sbGVkLCByZXNldCBpbnB1dCB2YWx1ZSBhbmQgY2xvc2UgbWVudSBmb3IgdGhlIHVzZXJcbiAgICAgICAgICAgIHJlc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICAgICAgY2xvc2VNZW51KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNvbW1pdFZhbHVlID0gKCk9PntcbiAgICAgICAgaWYgKGFsbG93c0N1c3RvbVZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgX2NvbGxlY3Rpb25fZ2V0SXRlbTtcbiAgICAgICAgICAgIHZhciBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1UZXh0ID0gc2VsZWN0ZWRLZXkgIT0gbnVsbCA/IChfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZSA9IChfY29sbGVjdGlvbl9nZXRJdGVtID0gY29sbGVjdGlvbi5nZXRJdGVtKHNlbGVjdGVkS2V5KSkgPT09IG51bGwgfHwgX2NvbGxlY3Rpb25fZ2V0SXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbGxlY3Rpb25fZ2V0SXRlbS50ZXh0VmFsdWUpICE9PSBudWxsICYmIF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlICE9PSB2b2lkIDAgPyBfY29sbGVjdGlvbl9nZXRJdGVtX3RleHRWYWx1ZSA6ICcnIDogJyc7XG4gICAgICAgICAgICBpbnB1dFZhbHVlID09PSBpdGVtVGV4dCA/IGNvbW1pdFNlbGVjdGlvbigpIDogY29tbWl0Q3VzdG9tVmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIC8vIFJlc2V0IGlucHV0VmFsdWUgYW5kIGNsb3NlIG1lbnVcbiAgICAgICAgY29tbWl0U2VsZWN0aW9uKCk7XG4gICAgfTtcbiAgICBsZXQgY29tbWl0ID0gKCk9PntcbiAgICAgICAgaWYgKHRyaWdnZXJTdGF0ZS5pc09wZW4gJiYgc2VsZWN0aW9uTWFuYWdlci5mb2N1c2VkS2V5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IGlucHV0VmFsdWUgYW5kIGNsb3NlIG1lbnUgaGVyZSBpZiB0aGUgc2VsZWN0ZWQga2V5IGlzIGFscmVhZHkgdGhlIGZvY3VzZWQga2V5LiBPdGhlcndpc2VcbiAgICAgICAgICAgIC8vIGZpcmUgb25TZWxlY3Rpb25DaGFuZ2UgdG8gYWxsb3cgdGhlIGFwcGxpY2F0aW9uIHRvIGNvbnRyb2wgdGhlIGNsb3NpbmcuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRLZXkgPT09IHNlbGVjdGlvbk1hbmFnZXIuZm9jdXNlZEtleSkgY29tbWl0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBlbHNlIHNldFNlbGVjdGVkS2V5KHNlbGVjdGlvbk1hbmFnZXIuZm9jdXNlZEtleSk7XG4gICAgICAgIH0gZWxzZSBjb21taXRWYWx1ZSgpO1xuICAgIH07XG4gICAgbGV0IHZhbHVlT25Gb2N1cyA9ICgwLCAkNDlCSlAkdXNlUmVmKShpbnB1dFZhbHVlKTtcbiAgICBsZXQgc2V0Rm9jdXNlZCA9IChpc0ZvY3VzZWQpPT57XG4gICAgICAgIGlmIChpc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHZhbHVlT25Gb2N1cy5jdXJyZW50ID0gaW5wdXRWYWx1ZTtcbiAgICAgICAgICAgIGlmIChtZW51VHJpZ2dlciA9PT0gJ2ZvY3VzJyAmJiAhcHJvcHMuaXNSZWFkT25seSkgb3BlbihudWxsLCAnZm9jdXMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRDbG9zZU9uQmx1cikgY29tbWl0VmFsdWUoKTtcbiAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlICE9PSB2YWx1ZU9uRm9jdXMuY3VycmVudCkgdmFsaWRhdGlvbi5jb21taXRWYWxpZGF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0Rm9jdXNlZFN0YXRlKGlzRm9jdXNlZCk7XG4gICAgfTtcbiAgICBsZXQgZGlzcGxheWVkQ29sbGVjdGlvbiA9ICgwLCAkNDlCSlAkdXNlTWVtbykoKCk9PntcbiAgICAgICAgaWYgKHRyaWdnZXJTdGF0ZS5pc09wZW4pIHtcbiAgICAgICAgICAgIGlmIChzaG93QWxsSXRlbXMpIHJldHVybiBvcmlnaW5hbENvbGxlY3Rpb247XG4gICAgICAgICAgICBlbHNlIHJldHVybiBmaWx0ZXJlZENvbGxlY3Rpb247XG4gICAgICAgIH0gZWxzZSByZXR1cm4gbGFzdENvbGxlY3Rpb247XG4gICAgfSwgW1xuICAgICAgICB0cmlnZ2VyU3RhdGUuaXNPcGVuLFxuICAgICAgICBvcmlnaW5hbENvbGxlY3Rpb24sXG4gICAgICAgIGZpbHRlcmVkQ29sbGVjdGlvbixcbiAgICAgICAgc2hvd0FsbEl0ZW1zLFxuICAgICAgICBsYXN0Q29sbGVjdGlvblxuICAgIF0pO1xuICAgIHZhciBfcHJvcHNfZGVmYXVsdFNlbGVjdGVkS2V5O1xuICAgIGxldCBkZWZhdWx0U2VsZWN0ZWRLZXkgPSAoX3Byb3BzX2RlZmF1bHRTZWxlY3RlZEtleSA9IHByb3BzLmRlZmF1bHRTZWxlY3RlZEtleSkgIT09IG51bGwgJiYgX3Byb3BzX2RlZmF1bHRTZWxlY3RlZEtleSAhPT0gdm9pZCAwID8gX3Byb3BzX2RlZmF1bHRTZWxlY3RlZEtleSA6IGluaXRpYWxTZWxlY3RlZEtleTtcbiAgICB2YXIgX2dldERlZmF1bHRJbnB1dFZhbHVlO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnZhbGlkYXRpb24sXG4gICAgICAgIC4uLnRyaWdnZXJTdGF0ZSxcbiAgICAgICAgZm9jdXNTdHJhdGVneTogZm9jdXNTdHJhdGVneSxcbiAgICAgICAgdG9nZ2xlOiB0b2dnbGUsXG4gICAgICAgIG9wZW46IG9wZW4sXG4gICAgICAgIGNsb3NlOiBjb21taXRWYWx1ZSxcbiAgICAgICAgc2VsZWN0aW9uTWFuYWdlcjogc2VsZWN0aW9uTWFuYWdlcixcbiAgICAgICAgc2VsZWN0ZWRLZXk6IHNlbGVjdGVkS2V5LFxuICAgICAgICBkZWZhdWx0U2VsZWN0ZWRLZXk6IGRlZmF1bHRTZWxlY3RlZEtleSxcbiAgICAgICAgc2V0U2VsZWN0ZWRLZXk6IHNldFNlbGVjdGVkS2V5LFxuICAgICAgICBkaXNhYmxlZEtleXM6IGRpc2FibGVkS2V5cyxcbiAgICAgICAgaXNGb2N1c2VkOiBpc0ZvY3VzZWQsXG4gICAgICAgIHNldEZvY3VzZWQ6IHNldEZvY3VzZWQsXG4gICAgICAgIHNlbGVjdGVkSXRlbTogc2VsZWN0ZWRJdGVtLFxuICAgICAgICBjb2xsZWN0aW9uOiBkaXNwbGF5ZWRDb2xsZWN0aW9uLFxuICAgICAgICBpbnB1dFZhbHVlOiBpbnB1dFZhbHVlLFxuICAgICAgICBkZWZhdWx0SW5wdXRWYWx1ZTogKF9nZXREZWZhdWx0SW5wdXRWYWx1ZSA9ICRhOWU3MzgyYTdkMTExY2I1JHZhciRnZXREZWZhdWx0SW5wdXRWYWx1ZShwcm9wcy5kZWZhdWx0SW5wdXRWYWx1ZSwgZGVmYXVsdFNlbGVjdGVkS2V5LCBjb2xsZWN0aW9uKSkgIT09IG51bGwgJiYgX2dldERlZmF1bHRJbnB1dFZhbHVlICE9PSB2b2lkIDAgPyBfZ2V0RGVmYXVsdElucHV0VmFsdWUgOiBpbml0aWFsVmFsdWUsXG4gICAgICAgIHNldElucHV0VmFsdWU6IHNldElucHV0VmFsdWUsXG4gICAgICAgIGNvbW1pdDogY29tbWl0LFxuICAgICAgICByZXZlcnQ6IHJldmVydFxuICAgIH07XG59XG5mdW5jdGlvbiAkYTllNzM4MmE3ZDExMWNiNSR2YXIkZmlsdGVyQ29sbGVjdGlvbihjb2xsZWN0aW9uLCBpbnB1dFZhbHVlLCBmaWx0ZXIpIHtcbiAgICByZXR1cm4gbmV3ICgwLCAkNDlCSlAkTGlzdENvbGxlY3Rpb24pKCRhOWU3MzgyYTdkMTExY2I1JHZhciRmaWx0ZXJOb2Rlcyhjb2xsZWN0aW9uLCBjb2xsZWN0aW9uLCBpbnB1dFZhbHVlLCBmaWx0ZXIpKTtcbn1cbmZ1bmN0aW9uICRhOWU3MzgyYTdkMTExY2I1JHZhciRmaWx0ZXJOb2Rlcyhjb2xsZWN0aW9uLCBub2RlcywgaW5wdXRWYWx1ZSwgZmlsdGVyKSB7XG4gICAgbGV0IGZpbHRlcmVkTm9kZSA9IFtdO1xuICAgIGZvciAobGV0IG5vZGUgb2Ygbm9kZXMpe1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSAnc2VjdGlvbicgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKSB7XG4gICAgICAgICAgICBsZXQgZmlsdGVyZWQgPSAkYTllNzM4MmE3ZDExMWNiNSR2YXIkZmlsdGVyTm9kZXMoY29sbGVjdGlvbiwgKDAsICQ0OUJKUCRnZXRDaGlsZE5vZGVzKShub2RlLCBjb2xsZWN0aW9uKSwgaW5wdXRWYWx1ZSwgZmlsdGVyKTtcbiAgICAgICAgICAgIGlmIChbXG4gICAgICAgICAgICAgICAgLi4uZmlsdGVyZWRcbiAgICAgICAgICAgIF0uc29tZSgobm9kZSk9Pm5vZGUudHlwZSA9PT0gJ2l0ZW0nKSkgZmlsdGVyZWROb2RlLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLm5vZGUsXG4gICAgICAgICAgICAgICAgY2hpbGROb2RlczogZmlsdGVyZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gJ2l0ZW0nICYmIGZpbHRlcihub2RlLnRleHRWYWx1ZSwgaW5wdXRWYWx1ZSkpIGZpbHRlcmVkTm9kZS5wdXNoKHtcbiAgICAgICAgICAgIC4uLm5vZGVcbiAgICAgICAgfSk7XG4gICAgICAgIGVsc2UgaWYgKG5vZGUudHlwZSAhPT0gJ2l0ZW0nKSBmaWx0ZXJlZE5vZGUucHVzaCh7XG4gICAgICAgICAgICAuLi5ub2RlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZmlsdGVyZWROb2RlO1xufVxuZnVuY3Rpb24gJGE5ZTczODJhN2QxMTFjYjUkdmFyJGdldERlZmF1bHRJbnB1dFZhbHVlKGRlZmF1bHRJbnB1dFZhbHVlLCBzZWxlY3RlZEtleSwgY29sbGVjdGlvbikge1xuICAgIGlmIChkZWZhdWx0SW5wdXRWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHZhciBfY29sbGVjdGlvbl9nZXRJdGVtO1xuICAgICAgICB2YXIgX2NvbGxlY3Rpb25fZ2V0SXRlbV90ZXh0VmFsdWU7XG4gICAgICAgIGlmIChzZWxlY3RlZEtleSAhPSBudWxsKSByZXR1cm4gKF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlID0gKF9jb2xsZWN0aW9uX2dldEl0ZW0gPSBjb2xsZWN0aW9uLmdldEl0ZW0oc2VsZWN0ZWRLZXkpKSA9PT0gbnVsbCB8fCBfY29sbGVjdGlvbl9nZXRJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29sbGVjdGlvbl9nZXRJdGVtLnRleHRWYWx1ZSkgIT09IG51bGwgJiYgX2NvbGxlY3Rpb25fZ2V0SXRlbV90ZXh0VmFsdWUgIT09IHZvaWQgMCA/IF9jb2xsZWN0aW9uX2dldEl0ZW1fdGV4dFZhbHVlIDogJyc7XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0SW5wdXRWYWx1ZTtcbn1cblxuXG5leHBvcnQgeyRhOWU3MzgyYTdkMTExY2I1JGV4cG9ydCRiNDUzYTNiZmQ0YTVmYTllIGFzIHVzZUNvbWJvQm94U3RhdGV9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlQ29tYm9Cb3hTdGF0ZS5tb2R1bGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@react-stately+combobox@3.11.1_react@18.3.1/node_modules/@react-stately/combobox/dist/useComboBoxState.mjs\n");

/***/ })

};
;