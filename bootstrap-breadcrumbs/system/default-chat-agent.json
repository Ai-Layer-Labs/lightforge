{
  "schema_name": "agent.def.v1",
  "title": "Default Chat Assistant",
  "tags": ["agent:def", "workspace:agents", "chat:default", "system:bootstrap"],
  "context": {
    "agent_id": "default-chat-assistant",
    
    "llm_config_id": null,
    "llm_config_comment": "Set to tool.config.v1 breadcrumb ID. Agent will load config from that breadcrumb. Change via Dashboard UI.",
    
    "system_prompt": "You are a helpful AI assistant integrated with the RCRT system.\n\nðŸ”´ CRITICAL: You MUST respond with valid JSON for EVERY response, even simple ones!\n\nALL RESPONSES MUST USE THIS FORMAT:\n{\n  \"action\": \"create\",\n  \"breadcrumb\": {\n    \"schema_name\": \"agent.response.v1\",\n    \"title\": \"Chat Response\",\n    \"tags\": [\"agent:response\", \"chat:output\"],\n    \"context\": {\n      \"message\": \"Your actual response text goes here\"\n    }\n  }\n}\n\nEXAMPLE - Simple greeting:\n{\n  \"action\": \"create\",\n  \"breadcrumb\": {\n    \"schema_name\": \"agent.response.v1\",\n    \"title\": \"Chat Response\",\n    \"tags\": [\"agent:response\", \"chat:output\"],\n    \"context\": {\n      \"message\": \"Hello! How can I help you today?\"\n    }\n  }\n}\n\nEXAMPLE - With tool invocation:\n{\n  \"action\": \"create\",\n  \"breadcrumb\": {\n    \"schema_name\": \"agent.response.v1\",\n    \"title\": \"Chat Response\",\n    \"tags\": [\"agent:response\", \"chat:output\"],\n    \"context\": {\n      \"message\": \"I'll generate a random number for you.\",\n      \"tool_requests\": [\n        {\n          \"tool\": \"random\",\n          \"input\": {\"min\": 1, \"max\": 100},\n          \"requestId\": \"rand-001\",\n          \"return_to_llm\": false\n        }\n      ]\n    }\n  }\n}\n\nTOOL RESPONSE HANDLING:\n- return_to_llm: false â†’ Tool result goes DIRECTLY to user (use for simple results)\n- return_to_llm: true â†’ Tool result comes BACK to you first (use when you need to add reasoning)\n\nYOU decide which to use based on the situation!\n\nCONTEXT INFO:\nYou receive pre-assembled context with:\n- Relevant conversation history (vector-searched)\n- Available tools and their usage\n- Recent tool results\n- Browser context (when available)\n\nREMEMBER:\n- ALWAYS respond with the JSON format above\n- Put your actual message in context.message\n- Only add tool_requests if you need to invoke tools\n- Output ONLY the JSON, no other text before or after",
    
    "capabilities": {
      "can_create_breadcrumbs": true,
      "can_update_own": true,
      "can_delete_own": false,
      "can_spawn_agents": false
    },
    
    "subscriptions": {
      "selectors": [
        {
          "comment": "Pre-built context from context-builder with LLM-optimized formatting. Context is assembled, transformed by schema llm_hints, and ready for LLM consumption.",
          "schema_name": "agent.context.v1",
          "all_tags": ["consumer:default-chat-assistant"],
          "role": "trigger",
          "key": "assembled_context",
          "fetch": {"method": "event_data"}
        },
        {
          "comment": "Current browser page context (transformed by llm_hints to show only essential info: title, URL, interactive elements)",
          "schema_name": "browser.page.context.v1",
          "any_tags": ["browser:active-tab"],
          "role": "context",
          "key": "browser",
          "fetch": {"method": "latest", "limit": 1}
        },
        {
          "comment": "Available tools catalog (transformed by llm_hints to exclude source code, show only schemas/descriptions)",
          "schema_name": "tool.catalog.v1",
          "role": "context",
          "key": "tools",
          "fetch": {"method": "latest", "limit": 1}
        },
        {
          "comment": "Recent conversation history (transformed by llm_hints to format as 'User (timestamp): message')",
          "schema_name": "user.message.v1",
          "any_tags": ["extension:chat"],
          "role": "context",
          "key": "history",
          "fetch": {"method": "recent", "limit": 10}
        },
        {
          "comment": "Tool responses trigger continuation (for LLM responses)",
          "schema_name": "tool.response.v1",
          "all_tags": ["workspace:tools"],
          "context_match": [
            {"path": "$.requestedBy", "op": "eq", "value": "default-chat-assistant"}
          ],
          "role": "trigger",
          "key": "tool_response",
          "fetch": {"method": "event_data"}
        },
        {
          "comment": "Recent tool responses (for context/history)",
          "schema_name": "tool.response.v1",
          "all_tags": ["workspace:tools"],
          "context_match": [
            {"path": "$.requestedBy", "op": "eq", "value": "default-chat-assistant"}
          ],
          "role": "context",
          "key": "tool_results",
          "fetch": {"method": "recent", "limit": 5}
        }
      ]
    },
    
    "metadata": {
      "version": "4.0.0",
      "architecture": "universal-executor",
      "created_by": "system",
      "purpose": "General purpose chat interface with context-builder integration",
      "source_of_truth": "bootstrap-breadcrumbs/system/default-chat-agent.json",
      "features": [
        "Vector-based context assembly",
        "Pre-built context consumption",
        "Browser context awareness",
        "Dynamic tool discovery",
        "Fetch-on-trigger pattern",
        "Configurable LLM via breadcrumb",
        "Zero hardcoding"
      ],
      "configuration_notes": [
        "LLM configured via tool.config.v1 breadcrumb",
        "Change LLM by updating tool:config breadcrumb tag",
        "Supports any LLM tool (openrouter, ollama, custom)",
        "No hardcoded defaults - fully dynamic"
      ]
    }
  }
}